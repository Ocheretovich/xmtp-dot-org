---
sidebar_label: Read receipt
sidebar_position: 7
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Read receipt content type

![Status](https://img.shields.io/badge/Content_type_status-Standards--track-yellow) ![Status](https://img.shields.io/badge/Reference_implementation_status-Beta-yellow)

A read receipt is a `timestamp` that indicates when a message was read. It is sent as a message and can be used to calculate the time since the last message was read.

:::tip Open for feedback

You are welcome to provide feedback by commenting on the XIP idea: [Proposal for read receipts content type](https://github.com/orgs/xmtp/discussions/43).

:::

### Install the package

<Tabs groupId="sdk-langs">
<TabItem value="js" label="JavaScript"  attributes={{className: "js_tab"}}>

```bash
npm i @xmtp/content-type-read-receipt
```

</TabItem></Tabs>

### Import and register

<Tabs groupId="sdk-langs">
<TabItem value="js" label="JavaScript"  attributes={{className: "js_tab"}}>

```tsx
import {
  ContentTypeReadReceipt,
  ReadReceiptCodec,
} from "@xmtp/content-type-read-receipt";
// Create the XMTP client
const xmtp = await Client.create(signer, { env: "dev" });
xmtp.registerCodec(new ReadReceiptCodec());
```

</TabItem></Tabs>

### Create a read receipt

- `timestamp`: The timestamp the read receipt was sent, in ISO 8601 format

<Tabs groupId="sdk-langs">
<TabItem value="js" label="JavaScript"  attributes={{className: "js_tab"}}>

```tsx
const readReceipt: ReadReceipt = {
  /**
   * The timestamp the read receipt was sent, in ISO 8601 format
   */
  timestamp: dateString,
};
```

</TabItem></Tabs>

### Send a read receipt

Once you've created a read receipt, you can send it:

<Tabs groupId="sdk-langs">
<TabItem value="js" label="JavaScript"  attributes={{className: "js_tab"}}>

```tsx
await conversation.send(readReceipt, {
  contentType: ContentTypeReadReceipt,
});
```

</TabItem></Tabs>

### Receive a read receipt

Here's how you can receive a reply:

<Tabs groupId="sdk-langs">
<TabItem value="js" label="JavaScript"  attributes={{className: "js_tab"}}>

```tsx
if (message.contentType.sameAs(ContentTypeReadReceipt)) {
  // We've got a reply.
  const timestamp = message.content.timestamp;
}
```

</TabItem></Tabs>

### Use a read receipt timestamp

A read receipt timestamp should not be displayed but instead used to calculate the time since the last message was read. While iterating through messages you can be sure that the last message was read at the timestamp of the read receipt if the string of the date is lower.

<Tabs groupId="sdk-langs">
<TabItem value="js" label="JavaScript"  attributes={{className: "js_tab"}}>

```jsx
function checkReadMessages(messages, readReceipt) {
  return messages.map((message) => {
    return {
      ...message,
      isRead: message.timestamp <= readTimestamp,
    };
  });
}
```

</TabItem></Tabs>
